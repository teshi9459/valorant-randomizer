<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>Valorant Randomizer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color-scheme: dark;
      --bg: #101322;
      --card: #181b2a;
      --accent: #ff4655;
      --accent-soft: rgba(255, 70, 85, 0.15);
      --text: #f5f5f5;
      --muted: #a0a4b8;
      --border: #26293a;
      --radius-lg: 18px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 16px;
    }
    .app {
      width: 100%;
      max-width: 900px;
      background: var(--card);
      border-radius: 24px;
      border: 1px solid var(--border);
      box-shadow:
        0 24px 60px rgba(0, 0, 0, 0.6),
        0 0 0 1px rgba(255, 255, 255, 0.02);
      padding: 22px 22px 18px;
      display: grid;
      gap: 20px;
    }
    @media (min-width: 768px) {
      .app {
        padding: 26px 26px 22px;
        grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.2fr);
        gap: 24px;
      }
    }
    .header { grid-column: 1 / -1; display: flex; justify-content: space-between; align-items: center; gap: 12px; }
    .title { font-size: 1.35rem; font-weight: 700; letter-spacing: 0.04em; text-transform: uppercase; display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
    .title-pill { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.15em; padding: 3px 10px; border-radius: 999px; border: 1px solid var(--accent-soft); background: rgba(0, 0, 0, 0.25); color: var(--muted); }
    .badge { padding: 3px 8px; border-radius: 999px; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.14em; border: 1px solid rgba(255, 255, 255, 0.12); color: var(--muted); white-space: nowrap; }
    .controls-card { background: rgba(8, 10, 20, 0.95); border-radius: var(--radius-lg); border: 1px solid rgba(255, 255, 255, 0.05); padding: 16px 16px 14px; display: flex; flex-direction: column; gap: 14px; }
    .controls-row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
    label { font-size: 0.78rem; text-transform: uppercase; letter-spacing: 0.14em; color: var(--muted); }
    input[type="number"] { background: #05060a; border-radius: 999px; border: 1px solid var(--border); padding: 7px 10px; color: var(--text); font-size: 0.85rem; width: 90px; outline: none; }
    input[type="number"]:focus { border-color: var(--accent); box-shadow: 0 0 0 1px rgba(255, 70, 85, 0.4); }
    .chip-group { display: flex; flex-wrap: wrap; gap: 6px; }
    .chip { display: inline-flex; align-items: center; gap: 6px; padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(255, 255, 255, 0.12); background: rgba(16, 18, 30, 0.98); font-size: 0.78rem; cursor: pointer; user-select: none; }
    .chip input { accent-color: var(--accent); }
    .chip span { font-size: 0.78rem; }
    .chip.active { border-color: var(--accent); background: var(--accent-soft); color: var(--text); }
    .btn-row { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 4px; }
    .btn { border-radius: 999px; border: none; cursor: pointer; padding: 8px 14px; font-size: 0.85rem; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; display: inline-flex; align-items: center; gap: 6px; background: var(--accent); color: #05060a; box-shadow: 0 10px 30px rgba(255, 70, 85, 0.4); }
    .btn:active { transform: translateY(1px); box-shadow: 0 6px 18px rgba(0, 0, 0, 0.9); }
    .hint { font-size: 0.75rem; color: var(--muted); }
    .results-card { background: rgba(8, 10, 20, 0.96); border-radius: var(--radius-lg); border: 1px solid rgba(255, 255, 255, 0.06); padding: 16px 16px 10px; display: flex; flex-direction: column; gap: 10px; max-height: 360px; overflow: hidden; }
    .results-header { display: flex; justify-content: space-between; align-items: baseline; gap: 8px; flex-wrap: wrap; }
    .results-title { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.16em; color: var(--muted); }
    .results-meta { font-size: 0.75rem; color: var(--muted); }
    .results-list { list-style: none; margin: 4px 0 0; padding: 0; overflow-y: auto; scrollbar-width: thin; scrollbar-color: var(--accent-soft) transparent; }
    .results-list li { padding: 7px 9px; border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.08); background: radial-gradient(circle at top left, rgba(255, 70, 85, 0.1), rgba(20, 22, 36, 0.98)); display: flex; justify-content: space-between; align-items: baseline; gap: 10px; font-size: 0.85rem; flex-wrap: wrap; }
    .slot-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.13em; color: var(--muted); flex-shrink: 0; min-width: 74px; white-space: nowrap; }
    .slot-main { display: flex; flex-direction: column; gap: 2px; flex: 1; }
    .slot-agent { font-weight: 600; }
    .slot-weapon { font-size: 0.8rem; color: var(--muted); }
    .empty-state { margin-top: 6px; font-size: 0.8rem; color: var(--muted); }
    .pill { border-radius: 999px; padding: 2px 8px; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.14em; border: 1px solid rgba(255, 255, 255, 0.16); color: var(--muted); white-space: nowrap; background: rgba(9, 11, 20, 0.9); }
    .footer { grid-column: 1 / -1; display: flex; justify-content: space-between; align-items: center; gap: 8px; font-size: 0.7rem; color: var(--muted); opacity: 0.9; flex-wrap: wrap; }
    .footer span { white-space: nowrap; }
    .footer a { color: var(--muted); text-decoration: none; border-bottom: 1px dashed rgba(255, 255, 255, 0.14); }
    .footer a:hover { color: var(--accent); border-bottom-color: var(--accent); }
    .names-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 6px; margin-top: 4px; }
    .name-input { background: #05060a; border-radius: 999px; border: 1px solid var(--border); padding: 6px 10px; font-size: 0.78rem; color: var(--text); outline: none; width: 100%; }
    .name-input:focus { border-color: var(--accent); box-shadow: 0 0 0 1px rgba(255, 70, 85, 0.4); }
    @media (max-width: 600px) {
      body { padding: 10px; align-items: flex-start; }
      .app { padding: 14px 14px 12px; gap: 14px; }
      .header { flex-direction: column; align-items: flex-start; }
      .title { font-size: 1.1rem; }
      .title-pill { font-size: 0.65rem; }
      .controls-row { flex-direction: column; align-items: flex-start; }
      .results-card { max-height: none; overflow: visible; }
      .results-list { max-height: 260px; overflow-y: auto; }
      .names-grid { grid-template-columns: 1fr; }
      .footer { flex-direction: column; align-items: flex-start; }
      .footer span { white-space: normal; }
    }
    @media (max-width: 400px) {
      .btn-row { flex-direction: column; align-items: stretch; }
      .btn { justify-content: center; width: 100%; }
      .chip-group { gap: 4px; }
    }
  </style>
</head>
<body>
<div class="app">
  <header class="header">
    <div>
      <div class="title">
        <span>Valorant Randomizer</span>
        <span class="title-pill">Agents · Weapons</span>
      </div>
      <div class="hint">Zufällige Agenten und Waffen für dich und deine Lobby.</div>
    </div>
    <div class="badge">Lobby Tool</div>
  </header>
  <section class="controls-card">
    <div class="controls-row">
      <label for="playerCount">Spieler</label>
      <input id="playerCount" type="number" min="1" max="10" value="5" />
      <span class="hint">1–10 Slots werden befüllt.</span>
    </div>
    <div>
      <label>Was soll gerollt werden?</label>
      <div class="chip-group">
        <label class="chip">
          <input id="agentsCheck" type="checkbox" checked />
          <span>Agents</span>
        </label>
        <label class="chip">
          <input id="weaponsCheck" type="checkbox" checked />
          <span>Waffen</span>
        </label>
      </div>
      <div class="hint">Mindestens eine Option aktivieren.</div>
    </div>
    <div class="controls-row">
      <label>Preset</label>
      <div class="chip-group">
        <button type="button" class="chip" data-preset="agents">
          <span>Nur Agenten</span>
        </button>
        <button type="button" class="chip" data-preset="weapons">
          <span>Nur Waffen</span>
        </button>
        <button type="button" class="chip" data-preset="both">
          <span>Agent + Waffe</span>
        </button>
      </div>
    </div>
    <div>
      <label>Agent-Rollenfilter</label>
      <div class="chip-group">
        <button type="button" class="chip active" data-agent-role="all">
          <span>Alle Rollen</span>
        </button>
        <button type="button" class="chip" data-agent-role="controller">
          <span>Controller</span>
        </button>
        <button type="button" class="chip" data-agent-role="duelist">
          <span>Duelists</span>
        </button>
        <button type="button" class="chip" data-agent-role="initiator">
          <span>Initiators</span>
        </button>
        <button type="button" class="chip" data-agent-role="sentinel">
          <span>Sentinels</span>
        </button>
      </div>
    </div>
    <div>
      <label>Waffenfilter</label>
      <div class="chip-group">
        <button type="button" class="chip active" data-weapon-filter="all">
          <span>Alle Waffen</span>
        </button>
        <button type="button" class="chip" data-weapon-filter="pistols">
          <span>Pistols</span>
        </button>
        <button type="button" class="chip" data-weapon-filter="primary">
          <span>Primaries</span>
        </button>
        <button type="button" class="chip" data-pistol-round="true">
          <span>Pistolrunde</span>
        </button>
      </div>
      <div class="hint">„Pistolrunde“ setzt den Filter automatisch auf Pistols.</div>
    </div>
    <div>
      <label>Spieler-Namen</label>
      <div id="namesContainer" class="names-grid"></div>
      <div class="hint">Optional: Namen eintragen, sonst „Spieler 1“ usw.</div>
    </div>
    <div class="btn-row">
      <button id="generateBtn" type="button" class="btn">
        <span>Roll</span>
      </button>
    </div>
  </section>
  <section class="results-card">
    <div class="results-header">
      <div>
        <div class="results-title">Ergebnis</div>
        <div id="resultsMeta" class="results-meta">Noch nichts generiert.</div>
      </div>
      <div id="modeTag" class="pill">Agents + Waffen</div>
    </div>
    <ul id="resultsList" class="results-list"></ul>
    <div id="emptyState" class="empty-state">
      Stell Spielerzahl ein, gib optional Namen ein, wähle Filter und klick auf „Roll“.
    </div>
  </section>
  <footer class="footer">
    <span>Datensätze grob an Valorant angelehnt (Stand 2025, nicht offiziell).</span>
    <span>Code: Single-File JS, kein Build nötig.</span>
  </footer>
</div>
<script>
  // --- Daten ---------------------------------------------------
  var MAX_PLAYERS = 10;
  var AGENT_DATA = [
    { name: "Astra", role: "controller" },
    { name: "Brimstone", role: "controller" },
    { name: "Clove", role: "controller" },
    { name: "Harbor", role: "controller" },
    { name: "Omen", role: "controller" },
    { name: "Viper", role: "controller" },
    { name: "Iso", role: "duelist" },
    { name: "Jett", role: "duelist" },
    { name: "Neon", role: "duelist" },
    { name: "Phoenix", role: "duelist" },
    { name: "Raze", role: "duelist" },
    { name: "Reyna", role: "duelist" },
    { name: "Waylay", role: "duelist" },
    { name: "Yoru", role: "duelist" },
    { name: "Breach", role: "initiator" },
    { name: "Fade", role: "initiator" },
    { name: "Gekko", role: "initiator" },
    { name: "KAY/O", role: "initiator" },
    { name: "Skye", role: "initiator" },
    { name: "Sova", role: "initiator" },
    { name: "Tejo", role: "initiator" },
    { name: "Chamber", role: "sentinel" },
    { name: "Cypher", role: "sentinel" },
    { name: "Deadlock", role: "sentinel" },
    { name: "Killjoy", role: "sentinel" },
    { name: "Sage", role: "sentinel" },
    { name: "Veto", role: "sentinel" },
    { name: "Vyse", role: "sentinel" }
  ];
  var WEAPON_DATA = [
    { name: "Classic", type: "sidearm" },
    { name: "Shorty", type: "sidearm" },
    { name: "Frenzy", type: "sidearm" },
    { name: "Ghost", type: "sidearm" },
    { name: "Sheriff", type: "sidearm" },
    { name: "Golden Gun", type: "sidearm" },
    { name: "Snowball Launcher", type: "sidearm" },
    { name: "Stinger", type: "primary" },
    { name: "Spectre", type: "primary" },
    { name: "Bucky", type: "primary" },
    { name: "Judge", type: "primary" },
    { name: "Bulldog", type: "primary" },
    { name: "Guardian", type: "primary" },
    { name: "Phantom", type: "primary" },
    { name: "Vandal", type: "primary" },
    { name: "Marshal", type: "primary" },
    { name: "Outlaw", type: "primary" },
    { name: "Operator", type: "primary" },
    { name: "Ares", type: "primary" },
    { name: "Odin", type: "primary" }
  ];
  // --- State ---------------------------------------------------
  var agentRoleFilter = "all";
  var weaponFilter = "all";
  var pistolRound = false;
  var playerNames = [];
  // --- Helper --------------------------------------------------
  function clamp(value, min, max) {
    if (value < min) return min;
    if (value > max) return max;
    return value;
  }
  function shuffleCopy(array) {
    var copy = array.slice();
    for (var i = copy.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var tmp = copy[i];
      copy[i] = copy[j];
      copy[j] = tmp;
    }
    return copy;
  }
  function getRandomList(baseArray, count) {
    if (!baseArray || baseArray.length === 0 || count <= 0) return [];
    var shuffled = shuffleCopy(baseArray);
    if (count <= shuffled.length) {
      return shuffled.slice(0, count);
    }
    var result = [];
    while (result.length < count) {
      for (var i = 0; i < shuffled.length && result.length < count; i++) {
        result.push(shuffled[i]);
      }
    }
    return result;
  }
  function detectModeText(includeAgents, includeWeapons) {
    if (includeAgents && includeWeapons) return "Agents + Waffen";
    if (includeAgents) return "Nur Agents";
    if (includeWeapons) return "Nur Waffen";
    return "Kein Modus";
  }
  function getAgentPool() {
    if (agentRoleFilter === "all") {
      return AGENT_DATA.map(function(a) { return a.name; });
    }
    return AGENT_DATA.filter(function(a) { return a.role === agentRoleFilter; }).map(function(a) { return a.name; });
  }
  function getWeaponPool() {
    if (weaponFilter === "all") {
      return WEAPON_DATA.map(function(w) { return w.name; });
    }
    if (weaponFilter === "pistols") {
      return WEAPON_DATA.filter(function(w) { return w.type === "sidearm"; }).map(function(w) { return w.name; });
    }
    if (weaponFilter === "primary") {
      return WEAPON_DATA.filter(function(w) { return w.type !== "sidearm"; }).map(function(w) { return w.name; });
    }
    return WEAPON_DATA.map(function(w) { return w.name; });
  }
  // --- DOM refs ------------------------------------------------
  var playerCountInput = document.getElementById("playerCount");
  var agentsCheck = document.getElementById("agentsCheck");
  var weaponsCheck = document.getElementById("weaponsCheck");
  var generateBtn = document.getElementById("generateBtn");
  var presetButtons = document.querySelectorAll("[data-preset]");
  var resultsList = document.getElementById("resultsList");
  var emptyState = document.getElementById("emptyState");
  var resultsMeta = document.getElementById("resultsMeta");
  var modeTag = document.getElementById("modeTag");
  var namesContainer = document.getElementById("namesContainer");
  var agentFilterButtons = document.querySelectorAll("[data-agent-role]");
  var weaponFilterButtons = document.querySelectorAll("[data-weapon-filter]");
  var pistolRoundBtn = document.querySelector("[data-pistol-round]");
  // --- UI Helpers ----------------------------------------------
  function updateModeTag() {
    var text = detectModeText(agentsCheck.checked, weaponsCheck.checked);
    modeTag.textContent = text;
  }
  function applyPreset(preset) {
    if (preset === "agents") {
      agentsCheck.checked = true;
      weaponsCheck.checked = false;
    } else if (preset === "weapons") {
      agentsCheck.checked = false;
      weaponsCheck.checked = true;
    } else if (preset === "both") {
      agentsCheck.checked = true;
      weaponsCheck.checked = true;
    }
    updateModeTag();
  }
  function setAgentRoleFilter(role) {
    agentRoleFilter = role;
    for (var i = 0; i < agentFilterButtons.length; i++) {
      var btn = agentFilterButtons[i];
      var r = btn.getAttribute("data-agent-role");
      btn.classList.toggle("active", r === role);
    }
  }
  function setWeaponFilter(filter, options) {
    options = options || {};
    var fromPistolRound = options.fromPistolRound === true;
    weaponFilter = filter;
    for (var i = 0; i < weaponFilterButtons.length; i++) {
      var btn = weaponFilterButtons[i];
      var f = btn.getAttribute("data-weapon-filter");
      btn.classList.toggle("active", f === filter);
    }
    if (!fromPistolRound && pistolRound && filter !== "pistols") {
      pistolRound = false;
      updatePistolRoundUI();
    }
  }
  function updatePistolRoundUI() {
    if (!pistolRoundBtn) return;
    pistolRoundBtn.classList.toggle("active", pistolRound);
  }
  function renderNameInputs() {
    var count = parseInt(playerCountInput.value, 10);
    if (isNaN(count)) count = 1;
    count = clamp(count, 1, MAX_PLAYERS);
    namesContainer.innerHTML = "";
    for (var i = 0; i < count; i++) {
      var input = document.createElement("input");
      input.type = "text";
      input.className = "name-input";
      input.placeholder = "Spieler " + (i + 1);
      input.value = playerNames[i] || "";
      (function(index, inp) {
        inp.addEventListener("input", function() {
          playerNames[index] = inp.value;
        });
      })(i, input);
      namesContainer.appendChild(input);
    }
  }
  // --- Kernlogik -----------------------------------------------
  function generateAssignments() {
    var includeAgents = agentsCheck.checked;
    var includeWeapons = weaponsCheck.checked;
    if (!includeAgents && !includeWeapons) {
      resultsList.innerHTML = "";
      emptyState.textContent = "Mindestens Agents oder Waffen aktivieren.";
      emptyState.style.display = "block";
      resultsMeta.textContent = "Fehler: Kein Modus gewählt.";
      modeTag.textContent = "Kein Modus";
      return;
    }
    var count = parseInt(playerCountInput.value, 10);
    if (isNaN(count)) count = 1;
    count = clamp(count, 1, MAX_PLAYERS);
    playerCountInput.value = String(count);
    renderNameInputs();
    var agentPool = includeAgents ? getAgentPool() : [];
    var weaponPool = includeWeapons ? getWeaponPool() : [];
    if (includeAgents && agentPool.length === 0) {
      resultsList.innerHTML = "";
      emptyState.textContent = "Kein Agent für diesen Rollenfilter verfügbar.";
      emptyState.style.display = "block";
      resultsMeta.textContent = "Fehler: Agent-Filter leer.";
      return;
    }
    if (includeWeapons && weaponPool.length === 0) {
      resultsList.innerHTML = "";
      emptyState.textContent = "Keine Waffen für diesen Waffenfilter verfügbar.";
      emptyState.style.display = "block";
      resultsMeta.textContent = "Fehler: Waffen-Filter leer.";
      return;
    }
    var agentsList = includeAgents ? getRandomList(agentPool, count) : [];
    var weaponsList = includeWeapons ? getRandomList(weaponPool, count) : [];
    resultsList.innerHTML = "";
    for (var i = 0; i < count; i++) {
      var li = document.createElement("li");
      var label = document.createElement("div");
      label.className = "slot-label";
      var nameRaw = playerNames[i] || "";
      var displayName = nameRaw.replace(/^\s+|\s+$/g, "");
      if (!displayName) displayName = "Spieler " + (i + 1);
      label.textContent = displayName;
      var main = document.createElement("div");
      main.className = "slot-main";
      if (includeAgents) {
        var agent = document.createElement("div");
        agent.className = "slot-agent";
        agent.textContent = agentsList[i];
        main.appendChild(agent);
      }
      if (includeWeapons) {
        var weapon = document.createElement("div");
        weapon.className = "slot-weapon";
        if (includeAgents) {
          weapon.textContent = "Waffe: " + weaponsList[i];
        } else {
          weapon.textContent = weaponsList[i];
        }
        main.appendChild(weapon);
      }
      li.appendChild(label);
      li.appendChild(main);
      resultsList.appendChild(li);
    }
    emptyState.style.display = "none";
    var modeText = detectModeText(includeAgents, includeWeapons);
    modeTag.textContent = modeText;
    var meta = count + " Slot(s) · " + modeText;
    if (agentRoleFilter !== "all") {
      meta += " · Rolle: " + agentRoleFilter;
    }
    if (weaponFilter === "pistols") {
      meta += " · Pistols";
    } else if (weaponFilter === "primary") {
      meta += " · Primaries";
    }
    if (pistolRound) {
      meta += " · Pistolrunde";
    }
    resultsMeta.textContent = meta;
  }
  // --- Events --------------------------------------------------
  generateBtn.addEventListener("click", function() {
    generateAssignments();
  });
  agentsCheck.addEventListener("change", updateModeTag);
  weaponsCheck.addEventListener("change", updateModeTag);
  for (var i = 0; i < presetButtons.length; i++) {
    presetButtons[i].addEventListener("click", function() {
      var preset = this.getAttribute("data-preset");
      applyPreset(preset);
      generateAssignments();
    });
  }
  for (var j = 0; j < agentFilterButtons.length; j++) {
    agentFilterButtons[j].addEventListener("click", function() {
      var role = this.getAttribute("data-agent-role");
      setAgentRoleFilter(role);
    });
  }
  for (var k = 0; k < weaponFilterButtons.length; k++) {
    weaponFilterButtons[k].addEventListener("click", function() {
      var filter = this.getAttribute("data-weapon-filter");
      setWeaponFilter(filter);
    });
  }
  if (pistolRoundBtn) {
    pistolRoundBtn.addEventListener("click", function() {
      pistolRound = !pistolRound;
      updatePistolRoundUI();
      if (pistolRound) {
        setWeaponFilter("pistols", { fromPistolRound: true });
      }
    });
  }
  playerCountInput.addEventListener("input", function() {
    var val = parseInt(playerCountInput.value, 10);
    if (isNaN(val)) val = 1;
    val = clamp(val, 1, MAX_PLAYERS);
    renderNameInputs();
  });
  // Initial
  updateModeTag();
  renderNameInputs();
  setAgentRoleFilter("all");
  setWeaponFilter("all");
  updatePistolRoundUI();
</script>
</body>
</html>
